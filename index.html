<!DOCTYPE html>
<html>
<head>
  <title>APRP RP Time System</title>
  <style>
    body { font-family: sans-serif; text-align: center; margin-top: 10vh; }
    h1 { font-size: 2em; }
    .big { font-size: 1.6em; margin: 20px; }
    input, button { font-size: 1em; padding: 8px; margin: 5px; }
  </style>
</head>
<body>

<h1>APRP Time Information</h1>

<div class="big">
  <strong>Current RP Time:</strong><br>
  <span id="rpNow"></span>
</div>

<hr style="width:60%; margin:30px auto;">

<h2>Convert IRL → RP</h2>

<input type="datetime-local" id="irlInput">
<button onclick="convertTime()">Convert</button>

<div class="big" id="convertedRP"></div>

<hr style="width:60%; margin:30px auto;">

<div class="big">
  <strong>Made by Ameilka Sulewska <3 </strong><br>
  <strong>
    <a href="https://discord.gg/mockgov">Join the APRP Discord</a>
  </strong>
</div>

<script>
// --- Bot-style RP Time Configuration ---
const startRP = { year: 2002, month: 9, day: 30, hour: 18, minute: 0, second: 0 }; // From bot example
const monthsPerDay = 1.20; // Speed from bot / Zuki Time

// --- Convert IRL → RP like bot ---
function irlToRP(dateObj) {
  const irlUTC = new Date(dateObj.getTime() + dateObj.getTimezoneOffset() * 60000);

  // Start date as JS Date
  const startDate = new Date(Date.UTC(
    startRP.year,
    startRP.month - 1,
    startRP.day,
    startRP.hour,
    startRP.minute,
    startRP.second
  ));

  // Days difference
  const msDiff = irlUTC - startDate;
  const daysDiff = msDiff / (1000 * 60 * 60 * 24);

  // Total RP months passed
  const totalMonths = daysDiff * monthsPerDay;

  // Separate whole months and fractional months
  const wholeMonths = Math.floor(totalMonths);
  const fracMonths = totalMonths - wholeMonths;

  // Add whole months
  let rpYear = startRP.year;
  let rpMonth = startRP.month - 1 + wholeMonths; // 0-indexed
  rpYear += Math.floor(rpMonth / 12);
  rpMonth = rpMonth % 12;

  // Fractional month -> days
  const daysInMonth = new Date(Date.UTC(rpYear, rpMonth + 1, 0)).getUTCDate();
  let rpDay = startRP.day + Math.floor(daysInMonth * fracMonths);

  // Adjust for month overflow
  while (rpDay > daysInMonth) {
    rpDay -= daysInMonth;
    rpMonth += 1;
    if (rpMonth > 11) {
      rpMonth = 0;
      rpYear += 1;
    }
  }

  // Fractional day -> hours/minutes/seconds
  const fractionalDay = (daysInMonth * fracMonths) - Math.floor(daysInMonth * fracMonths);
  const rpHour = Math.floor(fractionalDay * 24);
  const rpMinute = Math.floor((fractionalDay * 24 * 60) % 60);
  const rpSecond = Math.floor((fractionalDay * 24 * 3600) % 60);

  return new Date(Date.UTC(rpYear, rpMonth, rpDay, rpHour, rpMinute, rpSecond));
}

// --- Format RP time nicely ---
function formatRP(dateObj) {
  const days = ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];
  const months = ['January','February','March','April','May','June','July','August','September','October','November','December'];

  const dayName = days[dateObj.getUTCDay()];
  const monthName = months[dateObj.getUTCMonth()];
  const dayNum = dateObj.getUTCDate();
  const year = dateObj.getUTCFullYear();

  let hours = dateObj.getUTCHours();
  const minutes = dateObj.getUTCMinutes().toString().padStart(2,'0');
  const ampm = hours >= 12 ? 'PM' : 'AM';
  hours = hours % 12;
  hours = hours ? hours : 12;

  return `${dayName}, ${monthName} ${dayNum}, ${year} at ${hours}:${minutes} ${ampm}`;
}

// --- Live RP Clock ---
function updateClock() {
  const now = new Date();
  const rpNow = irlToRP(now);
  document.getElementById("rpNow").innerText = formatRP(rpNow);
}
setInterval(updateClock, 1000);
updateClock();

// --- Manual converter ---
function convertTime() {
  const input = document.getElementById("irlInput").value;
  if (!input) return;
  const irlDate = new Date(input);
  const rpDate = irlToRP(irlDate);
  document.getElementById("convertedRP").innerText = "RP Time: " + formatRP(rpDate);
}
</script>

</body>
</html>
