<!DOCTYPE html>
<html>
<head>
  <title>APRP Time System</title>
  <style>
    body { font-family: sans-serif; text-align: center; margin-top: 10vh; }
    h1 { font-size: 2em; }
    .big { font-size: 1.6em; margin: 20px; }
    input, button { font-size: 1em; padding: 8px; margin: 5px; }
  </style>
</head>
<body>

<h1>APRP Time Information</h1>

<div class="big">
  <strong>Current RP Time:</strong><br>
  <span id="rpNow"></span>
</div>

<hr style="width:60%; margin:30px auto;">

<h2>Convert IRL → RP</h2>

<input type="datetime-local" id="irlInput">
<button onclick="convertTime()">Convert</button>

<div class="big" id="convertedRP"></div>

<hr style="width:60%; margin:30px auto;">

<div class="big">
  <strong>Made by Ameilka Sulewska <3 </strong><br>
  <strong><a href="https://discord.gg/mockgov">Join the APRP Discord</a></strong>
</div>

<script>
/* ======= APRP Time System ======= */

// IRL anchor: the real-world date/time corresponding to the RP anchor
const anchorIRL = new Date("2026-02-11T21:00:00-05:00");

// RP anchor: the RP calendar date and fraction of day for the anchor
const anchorRP = { year: 2004, month: 1, day: 4, fraction: 0.7056 }; 
// fraction = fraction of the day past midnight (e.g., 0.7056 ≈ 16:56 or 4:56 PM)

// How many RP minutes pass per IRL minute
const RP_MINUTES_PER_IRL_MINUTE = 36;

/**
 * Converts an IRL Date to RP Date
 */
function irlToRP(dateObj) {
  // Difference in IRL minutes
  const diffMinutes = (dateObj - anchorIRL) / 60000;

  // RP minutes that have passed
  const rpMinutesPassed = diffMinutes * RP_MINUTES_PER_IRL_MINUTE;

  // Total RP seconds
  const totalSeconds = rpMinutesPassed * 60;

  // Create RP anchor date at midnight
  let rpDate = new Date(anchorRP.year, anchorRP.month - 1, anchorRP.day);

  // Add the fraction of the day in milliseconds
  const fractionMs = anchorRP.fraction * 24 * 60 * 60 * 1000;
  rpDate = new Date(rpDate.getTime() + fractionMs);

  // Add the elapsed RP seconds
  rpDate = new Date(rpDate.getTime() + totalSeconds * 1000);

  return rpDate;
}

/**
 * Updates the live RP clock
 */
function updateClock() {
  const now = new Date();
  const rpNow = irlToRP(now);
  document.getElementById("rpNow").innerText = rpNow.toLocaleString();
}

// Update every second
setInterval(updateClock, 1000);
updateClock();

/**
 * Converts a user-input IRL datetime to RP time
 */
function convertTime() {
  const input = document.getElementById("irlInput").value;
  if (!input) return;

  const irlDate = new Date(input);
  const rpDate = irlToRP(irlDate);

  document.getElementById("convertedRP").innerText =
    "RP Time: " + rpDate.toLocaleString();
}
</script>

</body>
</html>
