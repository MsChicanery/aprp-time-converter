<!DOCTYPE html>
<html>
<head>
  <title>APRP Time System</title>
  <style>
    body { font-family: sans-serif; text-align: center; margin-top: 10vh; }
    h1 { font-size: 2em; }
    .big { font-size: 1.6em; margin: 20px; }
    input, button { font-size: 1em; padding: 8px; margin: 5px; }
  </style>
</head>
<body>

<h1>APRP Time Information</h1>

<div class="big">
  <strong>Current RP Time:</strong><br>
  <span id="rpNow"></span>
</div>

<hr style="width:60%; margin:30px auto;">

<h2>Convert IRL â†’ RP</h2>

<input type="datetime-local" id="irlInput">
<button onclick="convertTime()">Convert</button>

<div class="big" id="convertedRP"></div>

<hr style="width:60%; margin:30px auto;">

<div class="big">
  <strong>Made by Ameilka Sulewska <3 </strong><br>
  <strong><a href="https://discord.gg/mockgov">Join the APRP Discord</a></strong>
</div>

<script>
/* ---------- RP Time System Configuration ---------- */

// Anchor points (similar to your Python bot)
const anchorIRL = new Date("2026-02-11T21:00:00-05:00"); // IRL anchor
const anchorRP  = { year: 2003, month: 6, day: 1, fraction: 0 }; // RP anchor

// RP speed: seconds per IRL minute (from your bot's magic constant)
const RP_SECONDS_PER_IRL_SECOND = 36; // Each IRL second = 36 RP seconds (same as JS constant 36x)

/* ---------- Helper Functions ---------- */

function addRPFractionToDate(rpAnchor, rpMinutes) {
  // Convert RP minutes to total seconds
  let totalSeconds = rpMinutes * 60;

  // Calculate days, hours, minutes, seconds
  let days = Math.floor(totalSeconds / 86400);
  totalSeconds -= days * 86400;

  let hours = Math.floor(totalSeconds / 3600);
  totalSeconds -= hours * 3600;

  let minutes = Math.floor(totalSeconds / 60);
  let seconds = Math.floor(totalSeconds - minutes * 60);

  let date = new Date(rpAnchor.year, rpAnchor.month - 1, rpAnchor.day);
  date.setDate(date.getDate() + days);
  date.setHours(hours, minutes, seconds);

  return date;
}

function irlToRP(dateObj) {
  // Calculate IRL diff in minutes
  const diffMinutes = (dateObj - anchorIRL) / 60000;
  // RP minutes elapsed
  const rpMinutesPassed = diffMinutes * RP_SECONDS_PER_IRL_SECOND;
  return addRPFractionToDate(anchorRP, rpMinutesPassed);
}

/* ---------- Display Functions ---------- */

function updateClock() {
  const now = new Date();
  const rpNow = irlToRP(now);
  document.getElementById("rpNow").innerText = rpNow.toLocaleString();
}

setInterval(updateClock, 1000); // update every second
updateClock();

function convertTime() {
  const input = document.getElementById("irlInput").value;
  if (!input) return;

  const irlDate = new Date(input);
  const rpDate = irlToRP(irlDate);

  document.getElementById("convertedRP").innerText =
    "RP Time: " + rpDate.toLocaleString();
}
</script>

</body>
</html>
